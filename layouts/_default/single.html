{{ define "main" }}
<article class="single">
  <h1>{{ .Title }}</h1>
  {{ if eq .Section "posts" }}
    <p class="meta"><time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time></p>
    {{ with .Summary }}
      <p class="post-summary">{{ . }}</p>
    {{ end }}
  {{ end }}

  {{ $images := .Params.images }}
  {{ if and (reflect.IsSlice $images) (gt (len $images) 0) }}
    <section class="post-gallery" aria-label="Post images">
      <section class="post-option-a">
        <div class="post-hero-block">
          {{ partial "post-image.html" (dict "page" $ "index" 0 "class" "post-detail-image post-hero-image" "loading" "eager" "sizes" "(min-width: 980px) 80vw, 96vw" "fallback" false "show_caption" true) }}
        </div>

        {{ $tail := after 1 $images }}
        {{ if gt (len $tail) 0 }}
          <div class="post-detail-rail">
            {{ range $k, $_ := $tail }}
              {{ $i := add $k 1 }}
              <article class="post-detail-card">
                {{ partial "post-image.html" (dict "page" $ "index" $i "class" "post-detail-image" "loading" "eager" "sizes" "(min-width: 980px) 40vw, 96vw" "fallback" false "show_caption" true) }}
              </article>
            {{ end }}
          </div>
        {{ end }}
      </section>
    </section>
  {{ end }}

  <div class="post-body">
    {{ .Content }}
  </div>
</article>
{{ end }}
