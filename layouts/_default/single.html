{{ define "main" }}
<article class="single">
  <h1>{{ .Title }}</h1>
  {{ if eq .Section "posts" }}
    <p class="meta"><time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time></p>
  {{ end }}

  {{ $images := .Params.images }}
  {{ if and (reflect.IsSlice $images) (gt (len $images) 0) }}
    <section class="post-gallery" aria-label="Post images">
      {{ $count := len $images }}
      {{ range $i, $_ := $images }}
        {{ if eq (mod $i 2) 0 }}
          {{ $pair := div $i 2 }}
          {{ $variant := mod $pair 3 }}
          <div class="post-pair-row {{ if eq $variant 0 }}is-emphasis-left{{ else if eq $variant 1 }}is-emphasis-right{{ else }}is-balanced{{ end }}">
            {{ partial "post-image.html" (dict "page" $ "index" $i "class" "post-detail-image" "loading" "eager" "sizes" "(min-width: 980px) 46vw, 96vw" "fallback" false "show_caption" true) }}
            {{ $j := add $i 1 }}
            {{ if lt $j $count }}
              {{ partial "post-image.html" (dict "page" $ "index" $j "class" "post-detail-image" "loading" "eager" "sizes" "(min-width: 980px) 46vw, 96vw" "fallback" false "show_caption" true) }}
            {{ end }}
          </div>
        {{ end }}
      {{ end }}
    </section>
  {{ end }}

  <div class="post-body">
    {{ .Content }}
  </div>
</article>
{{ end }}
